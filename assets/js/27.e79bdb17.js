(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{353:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v('为实现"微信小程序云开发"数据库文件批量导入(官方工具仅支持单文件导入)，学习electron，过年趁机开心一波，使用electron-vue实现微信小程序云开发数据库文件(夹)批量导入工具。')]),t._v(" "),a("h2",{attrs:{id:"项目展示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目展示"}},[t._v("#")]),t._v(" 项目展示")]),t._v(" "),a("h3",{attrs:{id:"需求分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求分析"}},[t._v("#")]),t._v(" 需求分析")]),t._v(" "),a("p",[t._v("为了毕设项目，通过"),a("code",[t._v("python")]),t._v("爬下了n多的单词JSON数据(预计: 16w词源，分布于约81个文件内)，但是需要导入到微信小程序云开发的类"),a("code",[t._v("MongoDB")]),t._v("数据库。官方开发工具仅支持单文件上传导入，一个文件一个文件的导入，那岂不“DIE”。")]),t._v(" "),a("p",[t._v("需导入的文件目录如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/b7jfiM5Hoc8h1Xz.png",alt:"待导入数据.png"}})]),t._v(" "),a("h3",{attrs:{id:"项目截图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目截图"}},[t._v("#")]),t._v(" 项目截图")]),t._v(" "),a("p",[t._v("先使用sketch大概画了一下设计图，\b"),a("a",{attrs:{href:"https://github.com/arleyGuoLei/wxcloud-databases-import/blob/master/wxcloud-pi.sketch",target:"_blank",rel:"noopener noreferrer"}},[t._v("设计图源文件"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("登录页面")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/gpwEUJBnYTcdF2v.png",alt:"login.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/15hkiZyGp4q7eKN.png",alt:"login-存在输入.png"}})]),t._v(" "),a("ul",[a("li",[t._v("导入页面")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/Ec2KBnh58VtY3W1.png",alt:"导入窗口.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/8VIhxkNBGdLXi7E.png",alt:"选择文件后准备导入.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/NVGD7LYdw4TkO39.png",alt:"部分导入完成.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/mqbNIuMGlA9oODy.png",alt:"完成导入.png"}})]),t._v(" "),a("ul",[a("li",[t._v("最终导入结果")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/01/25/5lJem3TiFbPDKHg.png",alt:"导入结果.png"}})]),t._v(" "),a("h3",{attrs:{id:"项目开源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目开源"}},[t._v("#")]),t._v(" 项目开源")]),t._v(" "),a("p",[t._v("项目主要依赖于微信小程序云开发http接口，"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/database/databaseMigrateImport.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信文档"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/arleyGuoLei/wxcloud-databases-import/",target:"_blank",rel:"noopener noreferrer"}},[t._v("☁ 基于electron-vue实现的微信小程序云开发数据库文件批量导入。"),a("OutboundLink")],1),t._v(" ✨✨✨✨")]),t._v(" "),a("h2",{attrs:{id:"一起撸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一起撸"}},[t._v("#")]),t._v(" 一起撸")]),t._v(" "),a("h3",{attrs:{id:"项目初始化-运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目初始化-运行"}},[t._v("#")]),t._v(" 项目初始化/运行")]),t._v(" "),a("p",[t._v("初始化过程就是一路选择，然后"),a("code",[t._v("install")]),t._v("就可以，推荐先食用"),a("a",{attrs:{href:"https://simulatedgreg.gitbooks.io/electron-vue/content/cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("electron-vue文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("ol",[a("li",[t._v("项目使用"),a("code",[t._v("electron-vue")]),t._v("开发，官方初始化方案如下(会遇到问题, 看下解析):")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Install vue-cli and scaffold boilerplate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g vue-cli\nvue init simulatedgreg/electron-vue my-project\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Install dependencies and run your app")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" my-project\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or npm install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" run dev "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or npm run dev")]),t._v("\n")])])]),a("ul",[a("li",[t._v("问题一: "),a("code",[t._v("vue init simulatedgreg/electron-vue my-project")]),t._v("卡在模板下载的解决方案")])]),t._v(" "),a("p",[t._v("由于官方模板使用"),a("code",[t._v("github")]),t._v("源作为模板，导致初始化very的慢，所以先使用国内源克隆，然后通过本地目录执行"),a("code",[t._v("vue init")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~/Code\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://gitee.com/mirrors/electron-vue.git "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#国内镜像")]),t._v("\nvue init ~/Code/electron-vue project-name\n")])])]),a("ul",[a("li",[t._v("问题二: 项目初始化完成后，"),a("code",[t._v("npm install")]),t._v("安装依赖过程中"),a("code",[t._v("electron")]),t._v("下载失败")])]),t._v(" "),a("p",[t._v("使用官方的electron源下载安装会一直失败，梯zi之后也不行。所以还是通过国内源来下载，分electron7以上版本和以下版本的方案，设置好源之后再次"),a("code",[t._v("install")]),t._v("即可。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. v7以上")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ELECTRON_MIRROR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://cdn.npm.taobao.org/dist/electron/\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("electron_custom_dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.1")]),t._v(".9 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改为需要安装的版本")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. v7以下")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ELECTRON_MIRROR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://npm.taobao.org/mirrors/electron/\n")])])]),a("ul",[a("li",[t._v("问题三: "),a("code",[t._v("npm run dev")]),t._v("之后报错"),a("a",{attrs:{href:"https://github.com/SimulatedGREG/electron-vue/issues/871",target:"_blank",rel:"noopener noreferrer"}},[t._v("error: Webpack ReferenceError: process is not defined"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改下方两个webpack配置文件中的HtmlWebpackPlugin配置")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .electron-vue/webpack.web.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .electron-vue/webpack.renderer.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../src/index.ejs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("templateParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" assets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      compilation"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      webpack"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStats")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJson")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      webpackConfig"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" compilation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      htmlWebpackPlugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" assets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" options\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  minify"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    collapseWhitespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    removeAttributeQuotes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    removeComments"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  nodeModules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("h3",{attrs:{id:"开发阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发阶段"}},[t._v("#")]),t._v(" 开发阶段")]),t._v(" "),a("ol",[a("li",[t._v('通过"千心和万苦"项目终于跑起来了。先简述一下这个项目之后对'),a("code",[t._v("electron")]),t._v("的理解：")])]),t._v(" "),a("ul",[a("li",[t._v('electron = 主进程(浏览器容器) + 渲染进程("普通"前端开发)')]),t._v(" "),a("li",[t._v("可通过api自定义的浏览器，不仅限于样式/规则/菜单等")]),t._v(" "),a("li",[t._v("可以调用nodejs或更多api的浏览器，渲染进程中也可以调用nodejs函数")])]),t._v(" "),a("p",[t._v("把自己的心态调整为：正在开发浏览器端应用，只是这个浏览器容器“变小了”了，没有标签栏了。")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("浏览器证明：跨域")])]),t._v(" "),a("p",[t._v("electron应用也存在跨域问题，通常前端中可以找服务端通过"),a("code",[t._v("cors")]),t._v("解决。但跨域问题本质是浏览器对不同源请求的一些限制。所以electron中最方便的方案，则是关闭浏览器的这一种限制。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主进程中，实例化窗口时设置BrowserWindow如下，就可以关闭限制")]),t._v("\n  mainWindow "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BrowserWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    webPreferences"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      webSecurity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("renderer中渲染进程的ui开发")])]),t._v(" "),a("p",[t._v("这一个只要大家心态对了，那就是浏览器应用开发，前端部分不深入讨论。")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("├── App.vue\n├── assets\n|  ├── Github.png\n|  ├── choise.png\n|  ├── choise2.png\n|  ├── close.png\n|  ├── delete.png\n|  ├── login-active.png\n|  ├── login-disable.png\n|  ├── logo.png\n|  ├── no-choise.png\n|  └── no-choise2.png\n├── components\n|  ├── DatabaseImport.vue\n|  └── Login.vue\n├── main.js\n├── router\n|  └── index.js\n├── store\n|  ├── index.js\n|  └── modules\n└── utils\n   ├── api.js\n   ├── disableDrag.js\n   └── tool.js\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("隐藏默认窗口后，窗口如何拖动")])]),t._v(" "),a("p",[t._v("在主进程中设置BrowserWindow为"),a("code",[t._v("frame")]),t._v(", 隐藏默认窗口。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("mainWindow "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BrowserWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    height"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("316")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    useContentSize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("248")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    maximizable"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    resizable"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    webPreferences"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      webSecurity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    frame"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置此属性为false")]),t._v("\n    icon"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("__static"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/logo.png")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    center"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("如此一下，窗口就不能拖动了。解决方案为在渲染进程，全局app设置css属性")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* app.vue style */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body,\n  html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-app-region")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" drag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("窗口“复制剪切粘贴全选”等快捷键失效")])]),t._v(" "),a("p",[t._v("在开发环境不会禁用默认菜单，所以快捷键不会失效，但是打包为production之后，打开的窗口就出现了问题，解决方案如下")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" globalShortcut "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'electron'")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'browser-window-focus'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("mainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("platform "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'darwin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" contents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mainWindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webContents\n\n    globalShortcut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+C'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    globalShortcut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+V'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("paste")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    globalShortcut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+X'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    globalShortcut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CommandOrControl+A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      contents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意globalShortcut注册之后会覆盖其他的快捷键，所以blur的时候取消快捷键")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'browser-window-blur'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  globalShortcut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unregisterAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"打包阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包阶段"}},[t._v("#")]),t._v(" 打包阶段")]),t._v(" "),a("ol",[a("li",[t._v("个人觉得"),a("code",[t._v("electron")]),t._v("应用的优缺点")])]),t._v(" "),a("p",[t._v("优点")]),t._v(" "),a("ul",[a("li",[t._v("开发简单(任何前端攻城狮不看官方文档都可以简单上手)")]),t._v(" "),a("li",[t._v("跨平台 [哈哈哈，如果"),a("code",[t._v("易语言")]),t._v('可以这么🐂🍺的跨平台，那我一样的"小学生"就无敌了 ]')]),t._v(" "),a("li",[t._v("社区活跃，坑比较好跳")])]),t._v(" "),a("p",[t._v("缺点")]),t._v(" "),a("ul",[a("li",[t._v("文件大")]),t._v(" "),a("li",[t._v("文件大")]),t._v(" "),a("li",[t._v("文件大")]),t._v(" "),a("li",[t._v("...")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("code",[t._v("electron-packager")]),t._v(" 和 "),a("code",[t._v("electron-builder")])])]),t._v(" "),a("p",[t._v("姑且理解为"),a("code",[t._v("electron-packager")]),t._v("打包的的可执行文件(打开即用， 文件大), "),a("code",[t._v("electron-builder")]),t._v("打包为安装包(压缩包， 文件小)")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("electron-vue通过"),a("code",[t._v("electron-builder")]),t._v("打包报错(忘记错误了...)")])]),t._v(" "),a("p",[t._v("升级"),a("code",[t._v("electron-builder")]),t._v("为最新版本即可。")]),t._v(" "),a("h3",{attrs:{id:"鼠年大吉"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#鼠年大吉"}},[t._v("#")]),t._v(" 鼠年大吉")]),t._v(" "),a("p",[t._v('祝各位攻城狮们，今年有"鼠"不尽的快乐!"鼠"不尽的收获!"鼠"不尽的钞票!"鼠"不尽的笑容!"鼠"不尽的幸福!" 😈辟邪“肺炎”! 🐀🐭')])])}),[],!1,null,null,null);s.default=e.exports}}]);